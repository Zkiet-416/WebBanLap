window.globalJsonData = {
  "product": {
    "brand": [
      {
        "name": "Acer",
        "status": "active",
        "laptop": [
          {
            "id": "AC-AS5-i5",
            "model": "Laptop Acer Gaming Nitro V ANV15-41-R2UP",
            "price": "16.390.000",
            "status": "hien",
            "image": "Acer1.png",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          },
          {
            "id": "AC-AS5-i5",
            "model": "Laptop Gaming Acer Nitro V 15 ProPanel ANV15-41-R0FE",
            "price": "21.990.000",
            "status": "hien",
            "image": "../assets/images/Acer2.png",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          },
          {
            "id": "AC-AS5-i5",
            "model": "Laptop gaming Acer Nitro V 15 ProPanel ANV15 41 R7CR",
            "price": "24.490.000",
            "status": "hien",
            "image": "../assets/images/Acer3.png",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          },
          {
            "id": "AC-AS5-i5",
            "model": "Laptop gaming Acer Nitro V 15 ProPanel ANV15 41 R0Y4",
            "price": "24.990.000",
            "status": "hien",
            "image": "../assets/images/Acer4.png",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          },
          {
            "id": "AC-AS5-i5",
            "model": "Laptop Gaming Acer Nitro 16 AI ProPanel AN16S 61 R5F4",
            "price": "39.990.000",
            "status": "hien",
            "image": "../assets/images/Acer5.png",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          },
          {
            "id": "AC-AS5-i5",
            "model": "Laptop Gaming Acer Nitro Lite 16 NL16 71G 56WQ",
            "price": "19.990.000",
            "status": "hien",
            "image": "../assets/images/Acer6.png",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          },
          {
            "id": "AC-AS5-i5",
            "model": "Laptop gaming Acer Nitro V ANV15 51 78BG",
            "price": "29.590.000",
            "status": "hien",
            "image": "../assets/images/Acer7.png",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          },
          {
            "id": "AC-AS5-i5",
            "model": "Laptop Gaming Acer Predator Helios 18 PH18 73 93P0",
            "price": "97.990.000",
            "status": "hien",
            "image": "../assets/images/Acer8.png",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          },
          {
            "id": "AC-AS5-i5",
            "model": "Laptop Gaming Acer Predator Helios Neo 16 AI PHN16 73 757W",
            "price": "50.890.000",
            "status": "hien",
            "image": "../assets/images/Acer9.png",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          },
          {
            "id": "AC-AS5-i5",
            "model": "Laptop gaming Acer Nitro V ProPanel ANV15 52 59AA",
            "price": "26.990.000",
            "status": "hien",
            "image": "../assets/images/Acer10.png",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          },
          {
            "id": "AC-AS5-i5",
            "model": "Laptop Gaming Acer Nitro V ANV15 41 R9M1",
            "price": "19.990.000",
            "status": "hien",
            "image": "../assets/images/Acer11.png",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          },
          {
            "id": "AC-AS5-i5",
            "model": "Laptop Gaming Acer Nitro V 15 ANV15 51 500A",
            "price": "19.290.000",
            "status": "hien",
            "image": "../assets/images/Acer12.png",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          },
          {
            "id": "AC-AS5-i5",
            "model": "Laptop Gaming Acer Nitro V ANV16 41 R6NA",
            "price": "29.890.000",
            "status": "hien",
            "image": "../assets/images/Acer13.png",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          },
          {
            "id": "AC-AS5-i5",
            "model": "Laptop Gaming Acer Nitro V ANV16 41 R36Y",
            "price": "27.390.000",
            "status": "hien",
            "image": "../assets/images/Acer14.png",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          },
          {
            "id": "AC-AS5-i5",
            "model": "Laptop Gaming Acer Nitro V ANV16 41 R7EN",
            "price": "23.990.000",
            "status": "hien",
            "image": "../assets/images/Acer15.jpg",
            "description": "CPU: Intel Core i5-1335U | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: Intel Iris Xe Graphics"
          }
        ],
        "balo": [],
        "phukienkhac": []
      },
      {
        "name": "Asus",
        "status": "active",
        "laptop": [
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus TUF F16 FX607VJB-RL151W",
            "price": "21.990.000",
            "status": "hien",
            "image": "../assets/images/Asus1.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          },
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus ROG Strix SCAR 18 G835LW-SA193W",
            "price": "79.890.000",
            "status": "hien",
            "image": "../assets/images/Asus2.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          },
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus AI V16 V3607VU-RP216W",
            "price": "24.190.000",
            "status": "hien",
            "image": "../assets/images/Asus3.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          },
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus AI V16 V3607VU-RP216Q",
            "price": "15.444.000",
            "status": "hien",
            "image": "../assets/images/Asus1.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          },
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus AI V16 V3607VU-RP216E",
            "price": "24.000.000",
            "status": "hien",
            "image": "../assets/images/Asus2.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          },
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus IA V16 V3607VU-RP216W",
            "price": "23.190.000",
            "status": "hien",
            "image": "../assets/images/Asus3.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          },
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus AO V16 V3607VU-RP216W",
            "price": "22.190.000",
            "status": "hien",
            "image": "../assets/images/Asus1.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          },
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus AI V16 V3607VU-RP226W",
            "price": "21.190.000",
            "status": "hien",
            "image": "../assets/images/Asus2.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          },
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus AP V16 V3607VU-RP216W",
            "price": "20.190.000",
            "status": "hien",
            "image": "../assets/images/Asus3.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          },
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus AI V10 V3607VU-RP216W",
            "price": "19.190.000",
            "status": "hien",
            "image": "../assets/images/Asus1.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          },
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus AI V16 V3607VP-RP216W",
            "price": "29.190.000",
            "status": "hien",
            "image": "../assets/images/Asus2.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          },
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus AI V16 V3607VU-RP216C",
            "price": "28.190.000",
            "status": "hien",
            "image": "../assets/images/Asus3.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          },
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus AI V16 V3607VU-RP216R",
            "price": "30.190.000",
            "status": "hien",
            "image": "../assets/images/Asus1.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          },
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus AI V16 V3607VU-RP216A",
            "price": "31.190.000",
            "status": "hien",
            "image": "../assets/images/Asus2.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          },
          {
            "id": "AS-VVB15-i7",
            "model": "Laptop Gaming Asus AI V16 V3607VU-RP216D",
            "price": "17.190.000",
            "status": "hien",
            "image": "../assets/images/Asus3.png",
            "description": "CPU: Intel Core i7-12700H | RAM: 8GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX 4050"
          }
        ],
        "balo": [],
        "phukienkhac": []
      },
      {
        "name": "HP",
        "status": "active",
        "laptop": [
          {
            "id": "HP-LAPTO",
            "model": "Laptop Gaming HP Victus 16-s1141AX AZ0C6PA",
            "price": "27.990.000",
            "status": "hien",
            "image": "../assets/images/HP1.jpg",
            "description": "CPU: Intel Core i7 (Thế hệ mới) | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX (Series 30/40)"
          },
          {
            "id": "HP-LAPTO",
            "model": "Laptop Gaming HP Victus 16-s1146AX AZ0D1PA",
            "price": "24.990.000",
            "status": "hien",
            "image": "../assets/images/HP2.jpg",
            "description": "CPU: Intel Core i7 (Thế hệ mới) | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX (Series 30/40)"
          },
          {
            "id": "HP-LAPTO",
            "model": "Laptop Gaming HP Victus 16-s1041AX AZ0C6PA",
            "price": "28.990.000",
            "status": "hien",
            "image": "../assets/images/HP1.jpg",
            "description": "CPU: Intel Core i7 (Thế hệ mới) | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX (Series 30/40)"
          },
          {
            "id": "HP-LAPTO",
            "model": "Laptop Gaming HP Victus 16-s1156AX AZ0D1PA",
            "price": "25.990.000",
            "status": "hien",
            "image": "../assets/images/HP2.jpg",
            "description": "CPU: Intel Core i7 (Thế hệ mới) | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX (Series 30/40)"
          },
          {
            "id": "HP-LAPTO",
            "model": "Laptop Gaming HP Victus 16-s141AX AZ0C6PA",
            "price": "29.990.000",
            "status": "hien",
            "image": "../assets/images/HP1.jpg",
            "description": "CPU: Intel Core i7 (Thế hệ mới) | RAM: 16GB DDR4 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX (Series 30/40)"
          }
        ],
        "balo": [],
        "phukienkhac": []
      },
      {
        "name": "Lenovo",
        "status": "active",
        "laptop": [
          {
            "id": "LE-LAPTO",
            "model": "Laptop Gaming Lenovo LOQ Essential 15IRX11 83SC003TVN",
            "price": "30.490.000",
            "status": "hien",
            "image": "../assets/images/Lenovo1.png",
            "description": "CPU: Intel Core i5/i7 (Thế hệ mới) | RAM: 16GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX (Series 40)"
          },
          {
            "id": "LE-LAPTO",
            "model": "Laptop Gaming Lenovo LOQ Essential 14IRX11 83SC003RVN",
            "price": "26.990.000",
            "status": "hien",
            "image": "../assets/images/Lenovo2.png",
            "description": "CPU: Intel Core i5/i7 (Thế hệ mới) | RAM: 16GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX (Series 40)"
          },
          {
            "id": "LE-LAPTO",
            "model": "Laptop Gaming Lenovo LOQ Essential 15IRX12 83SC003TVN",
            "price": "30.999.000",
            "status": "hien",
            "image": "../assets/images/Lenovo1.png",
            "description": "CPU: Intel Core i5/i7 (Thế hệ mới) | RAM: 16GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX (Series 40)"
          },
          {
            "id": "LE-LAPTO",
            "model": "Laptop Gaming Lenovo LOQ Essential 13IRX11 83SC003RVN",
            "price": "28.990.000",
            "status": "hien",
            "image": "../assets/images/Lenovo2.png",
            "description": "CPU: Intel Core i5/i7 (Thế hệ mới) | RAM: 16GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX (Series 40)"
          },
          {
            "id": "LE-LAPTO",
            "model": "Laptop Gaming Lenovo LOQ Essential 15IRX10 83SC003TVN",
            "price": "30.000.000",
            "status": "hien",
            "image": "../assets/images/Lenovo1.png",
            "description": "CPU: Intel Core i5/i7 (Thế hệ mới) | RAM: 16GB DDR5 | Ổ cứng: 512GB SSD | VGA: NVIDIA GeForce RTX (Series 40)"
          }
        ],
        "balo": [],
        "phukienkhac": []
      },
      {
        "name": "Dell",
        "status": "active",
        "laptop": [
          {
            "id": "DELL-XPS-i9",
            "model": "Dell Latitude 3420 Laptop",
            "price": "9.000.560",
            "status": "hien",
            "image": "../assets/images/Dell1.webp",
            "description": "CPU: Intel Core i9-13900H | RAM: 32GB DDR5 | Ổ cứng: 1TB SSD | VGA: NVIDIA GeForce RTX 4070"
          },
          {
            "id": "DELL-XPS-i9",
            "model": "Dell Latitude 3419 Laptop",
            "price": "9.500.560",
            "status": "hien",
            "image": "../assets/images/Dell1.webp",
            "description": "CPU: Intel Core i9-13900H | RAM: 32GB DDR5 | Ổ cứng: 1TB SSD | VGA: NVIDIA GeForce RTX 4070"
          },
          {
            "id": "DELL-XPS-i9",
            "model": "Dell Latitude 3418 Laptop",
            "price": "10.000.560",
            "status": "hien",
            "image": "../assets/images/Dell1.webp",
            "description": "CPU: Intel Core i9-13900H | RAM: 32GB DDR5 | Ổ cứng: 1TB SSD | VGA: NVIDIA GeForce RTX 4070"
          },
          {
            "id": "DELL-XPS-i9",
            "model": "Dell Latitude 3417 Laptop",
            "price": "11.000.560",
            "status": "hien",
            "image": "../assets/images/Dell1.webp",
            "description": "CPU: Intel Core i9-13900H | RAM: 32GB DDR5 | Ổ cứng: 1TB SSD | VGA: NVIDIA GeForce RTX 4070"
          },
          {
            "id": "DELL-XPS-i9",
            "model": "Dell Latitude 3416 Laptop",
            "price": "12.000.560",
            "status": "hien",
            "image": "../assets/images/Dell1.webp",
            "description": "CPU: Intel Core i9-13900H | RAM: 32GB DDR5 | Ổ cứng: 1TB SSD | VGA: NVIDIA GeForce RTX 4070"
          }
        ],
        "balo": [
          {
            "id": "DELL-BP-GAMING",
            "model": "Balo Dell Gaming",
            "price": "900.000",
            "status": "hien",
            "image": "https://placehold.co/150x150/ffffff/0000FF?text=Dell",
            "description": "Loại sản phẩm: Balo | Kích thước: 17 inch | Chất liệu: Vải chống mài mòn"
          }
        ],
        "phukienkhac": [
          {
            "id": "de-tan-nhiet",
            "model": "Đế tản nhiệt Cooler Master Ergostand Air",
            "price": "690.000",
            "status": "hien",
            "image": "../assets/images/Dtn1.jpg",
            "description": "Chất liệu: Nhôm/Nhựa cao cấp | Tính năng: Tản nhiệt hiệu quả, điều chỉnh độ cao | Tương thích: Laptop 14-17 inch"
          },
          {
            "id": "de-tan-nhiet",
            "model": "Đế tản nhiệt Cooler Master NOTEPAL CMC2",
            "price": "100.000",
            "status": "hien",
            "image": "../assets/images/Dtn2.png",
            "description": "Chất liệu: Nhôm/Nhựa cao cấp | Tính năng: Tản nhiệt hiệu quả, điều chỉnh độ cao | Tương thích: Laptop 14-17 inch"
          },
          {
            "id": "de-tan-nhiet",
            "model": "Đế tản nhiệt Cooler Master Ergostand Air",
            "price": "590.000",
            "status": "hien",
            "image": "../assets/images/Dtn1.jpg",
            "description": "Chất liệu: Nhôm/Nhựa cao cấp | Tính năng: Tản nhiệt hiệu quả, điều chỉnh độ cao | Tương thích: Laptop 14-17 inch"
          },
          {
            "id": "de-tan-nhiet",
            "model": "Đế tản nhiệt Cooler Master NOTEPAL CMC3",
            "price": "200.000",
            "status": "hien",
            "image": "../assets/images/Dtn2.png",
            "description": "Chất liệu: Nhôm/Nhựa cao cấp | Tính năng: Tản nhiệt hiệu quả, điều chỉnh độ cao | Tương thích: Laptop 14-17 inch"
          },
          {
            "id": "de-tan-nhiet",
            "model": "Đế tản nhiệt Cooler Master Ergostand Air",
            "price": "790.000",
            "status": "hien",
            "image": "../assets/images/Dtn1.jpg",
            "description": "Chất liệu: Nhôm/Nhựa cao cấp | Tính năng: Tản nhiệt hiệu quả, điều chỉnh độ cao | Tương thích: Laptop 14-17 inch"
          },
          {
            "id": "de-tan-nhiet",
            "model": "Đế tản nhiệt Cooler Master NOTEPAL CMC4",
            "price": "300.000",
            "status": "hien",
            "image": "../assets/images/Dtn2.png",
            "description": "Chất liệu: Nhôm/Nhựa cao cấp | Tính năng: Tản nhiệt hiệu quả, điều chỉnh độ cao | Tương thích: Laptop 14-17 inch"
          },
          {
            "id": "tai-nghe",
            "model": "Tai nghe Gaming Logitech G335",
            "price": "1.250.000",
            "status": "hien",
            "image": "../assets/images/Ear1.jpg",
            "description": "Kiểu kết nối: USB/3.5mm | Tính năng: Âm thanh vòm 7.1, mic khử tiếng ồn | Dành cho: Gaming/Làm việc"
          },
          {
            "id": "tai-nghe",
            "model": "Tai nghe gaming Rapoo VH520C",
            "price": "420.000",
            "status": "hien",
            "image": "../assets/images/Ear2.png",
            "description": "Kiểu kết nối: USB/3.5mm | Tính năng: Âm thanh vòm 7.1, mic khử tiếng ồn | Dành cho: Gaming/Làm việc"
          },
          {
            "id": "tai-nghe",
            "model": "Tai nghe gaming Rapoo VH650 (USB, 7.2 Led RGB)",
            "price": "350.000",
            "status": "hien",
            "image": "../assets/images/Ear3.jpg",
            "description": "Kiểu kết nối: USB/3.5mm | Tính năng: Âm thanh vòm 7.1, mic khử tiếng ồn | Dành cho: Gaming/Làm việc"
          },
          {
            "id": "tai-nghe",
            "model": "Tai nghe Gaming Logitech G333",
            "price": "1.550.000",
            "status": "hien",
            "image": "../assets/images/Ear1.jpg",
            "description": "Kiểu kết nối: USB/3.5mm | Tính năng: Âm thanh vòm 7.1, mic khử tiếng ồn | Dành cho: Gaming/Làm việc"
          },
          {
            "id": "tai-nghe",
            "model": "Tai nghe gaming Rapoo VH520D",
            "price": "450.000",
            "status": "hien",
            "image": "../assets/images/Ear2.png",
            "description": "Kiểu kết nối: USB/3.5mm | Tính năng: Âm thanh vòm 7.1, mic khử tiếng ồn | Dành cho: Gaming/Làm việc"
          },
          {
            "id": "tai-nghe",
            "model": "Tai nghe gaming Rapoo VH650 (USB, 7.1 Led RGB)",
            "price": "850.000",
            "status": "hien",
            "image": "../assets/images/Ear3.jpg",
            "description": "Kiểu kết nối: USB/3.5mm | Tính năng: Âm thanh vòm 7.1, mic khử tiếng ồn | Dành cho: Gaming/Làm việc"
          },
          {
            "id": "chuot",
            "model": "Chuột Razer Cobra - Zenless Zone One Edition",
            "price": "1.369.000",
            "status": "hien",
            "image": "../assets/images/Mouse1.jpg",
            "description": "Loại: Quang/Laser | DPI: 800 - 16000 | Kết nối: Có dây/Không dây | Phù hợp: Gaming/Văn phòng"
          },
          {
            "id": "chuot",
            "model": "Chuột Logitech G501 Hero RGB",
            "price": "960.0.000",
            "status": "hien",
            "image": "../assets/images/Mouse2.jpg",
            "description": "Loại: Quang/Laser | DPI: 800 - 16000 | Kết nối: Có dây/Không dây | Phù hợp: Gaming/Văn phòng"
          },
          {
            "id": "chuot",
            "model": "Chuột quang USB Logitech B100",
            "price": "79.000",
            "status": "hien",
            "image": "../assets/images/Mouse3.jpg",
            "description": "Loại: Quang/Laser | DPI: 800 - 16000 | Kết nối: Có dây/Không dây | Phù hợp: Gaming/Văn phòng"
          },
          {
            "id": "chuot",
            "model": "Chuột Razer Cobra - Zenless Zone Zero Edition",
            "price": "1.100.000",
            "status": "hien",
            "image": "../assets/images/Mouse1.jpg",
            "description": "Loại: Quang/Laser | DPI: 800 - 16000 | Kết nối: Có dây/Không dây | Phù hợp: Gaming/Văn phòng"
          },
          {
            "id": "chuot",
            "model": "Chuột Logitech G502 Hero RGB",
            "price": "1.000.000",
            "status": "hien",
            "image": "../assets/images/Mouse2.jpg",
            "description": "Loại: Quang/Laser | DPI: 800 - 16000 | Kết nối: Có dây/Không dây | Phù hợp: Gaming/Văn phòng"
          },
          {
            "id": "chuot",
            "model": "Chuột quang USB Logitech B101",
            "price": "100.000",
            "status": "hien",
            "image": "../assets/images/Mouse3.jpg",
            "description": "Loại: Quang/Laser | DPI: 800 - 16000 | Kết nối: Có dây/Không dây | Phù hợp: Gaming/Văn phòng"
          },
          {
            "id": "ban-phim",
            "model": "Bàn phím Akko MonsGeek M1W HE-SP V3 Dark Night",
            "price": "3.150.000",
            "status": "hien",
            "image": "../assets/images/BP1.png",
            "description": "Loại: Bàn phím cơ | Switch: Red/Brown/Blue | Layout: Fullsize/TKL | Tính năng: LED RGB, Anti-Ghosting"
          },
          {
            "id": "ban-phim",
            "model": "Bàn phím Akko MonsGeek M1W HE-SP V3 Horizon Blue",
            "price": "3.050.000",
            "status": "hien",
            "image": "../assets/images/BP2.jpg",
            "description": "Loại: Bàn phím cơ | Switch: Red/Brown/Blue | Layout: Fullsize/TKL | Tính năng: LED RGB, Anti-Ghosting"
          },
          {
            "id": "ban-phim",
            "model": "Bàn phím Akko MonsGeek M1W HE-SP V3 Lilac Purple",
            "price": "3.150.000",
            "status": "hien",
            "image": "../assets/images/BP3.png",
            "description": "Loại: Bàn phím cơ | Switch: Red/Brown/Blue | Layout: Fullsize/TKL | Tính năng: LED RGB, Anti-Ghosting"
          },
          {
            "id": "ban-phim",
            "model": "Bàn phím Akko MonsGeek M1W HE-SP V4 Dark Night",
            "price": "3.550.000",
            "status": "hien",
            "image": "../assets/images/BP1.png",
            "description": "Loại: Bàn phím cơ | Switch: Red/Brown/Blue | Layout: Fullsize/TKL | Tính năng: LED RGB, Anti-Ghosting"
          },
          {
            "id": "ban-phim",
            "model": "Bàn phím Akko MonsGeek M1W HE-SP V5 Horizon Blue",
            "price": "4.050.000",
            "status": "hien",
            "image": "../assets/images/BP2.jpg",
            "description": "Loại: Bàn phím cơ | Switch: Red/Brown/Blue | Layout: Fullsize/TKL | Tính năng: LED RGB, Anti-Ghosting"
          },
          {
            "id": "ban-phim",
            "model": "Bàn phím Akko MonsGeek M1W HE-SP V5 Lilac Purple",
            "price": "3.650.000",
            "status": "hien",
            "image": "../assets/images/BP3.png",
            "description": "Loại: Bàn phím cơ | Switch: Red/Brown/Blue | Layout: Fullsize/TKL | Tính năng: LED RGB, Anti-Ghosting"
          }
        ]
      },
      {
        "name": "Balo",
        "status": "active",
        "balo": [
          {
            "id": "BA-BALO",
            "model": "Balo Predator SUV",
            "price": "300.000",
            "status": "hien",
            "image": "../assets/images/Balo1.png",
            "description": "Chất liệu: Bền, chống nước, chống va đập | Tương thích: Laptop 15.6 - 17 inch | Thiết kế: Đa ngăn, chuyên dụng cho Gaming"
          },
          {
            "id": "BA-BALO",
            "model": "Balo Predator Utility",
            "price": "990.000",
            "status": "hien",
            "image": "../assets/images/Balo2.png",
            "description": "Chất liệu: Bền, chống nước, chống va đập | Tương thích: Laptop 15.6 - 17 inch | Thiết kế: Đa ngăn, chuyên dụng cho Gaming"
          },
          {
            "id": "BA-BALO",
            "model": "Balo ROG Archer BP1505",
            "price": "2.490.000",
            "status": "hien",
            "image": "../assets/images/Balo3.jpg",
            "description": "Chất liệu: Bền, chống nước, chống va đập | Tương thích: Laptop 15.6 - 17 inch | Thiết kế: Đa ngăn, chuyên dụng cho Gaming"
          },
          {
            "id": "BA-BALO",
            "model": "Balo ROG Archer BP2702",
            "price": "5.490.000",
            "status": "hien",
            "image": "../assets/images/Balo4.jpg",
            "description": "Chất liệu: Bền, chống nước, chống va đập | Tương thích: Laptop 15.6 - 17 inch | Thiết kế: Đa ngăn, chuyên dụng cho Gaming"
          },
          {
            "id": "BA-BALO",
            "model": "Balo ROG Archer Weekender BP2703",
            "price": "4.990.000",
            "status": "hien",
            "image": "../assets/images/Balo5.jpg",
            "description": "Chất liệu: Bền, chống nước, chống va đập | Tương thích: Laptop 15.6 - 17 inch | Thiết kế: Đa ngăn, chuyên dụng cho Gaming"
          },
          {
            "id": "BA-BALO",
            "model": "Balo ROG Archer Weekender BP2703",
            "price": "5.990.000",
            "status": "hien",
            "image": "../assets/images/Balo1.png",
            "description": "Chất liệu: Bền, chống nước, chống va đập | Tương thích: Laptop 15.6 - 17 inch | Thiết kế: Đa ngăn, chuyên dụng cho Gaming"
          }
        ],
        "phukienkhac": []
      }
    ]
  }
};

let editingRow = null;
let currentOfferContent = "Ưu đãi đặc biệt: Tặng chuột không dây và túi chống sốc cao cấp!";
let currentViewingBrandName = null; 

// BIẾN PHÂN TRANG
let brandsPerPage = 10;
let currentBrandPage = 1;
let productsPerPage = 7;
let currentProductPage = 1;
let currentProductsList = []; 
let filteredProductsList = []; 

window.loadAdminProductPage = () => {
    const DOM = {
        brandManagementArea: document.getElementById('brand-management-area'),
        tableBody: document.getElementById('brand-list-tbody'),
        formHeader: document.querySelector('.form-header h3'),
        submitBtn: document.querySelector('.btn-submit'),
        resetBtn: document.querySelector('.btn-reset'),
        tenInput: document.getElementById('ten'),
        soLuongInput: document.getElementById('soluong'),
        productDetailsArea: document.getElementById('product-details-area'),
        productListTbody: document.getElementById('product-list'),
        brandSearchInput: document.getElementById('brand-search-input'), 
        brandPaginationContainer: document.getElementById('brand-pagination-container'),
        productPaginationContainer: document.getElementById('product-pagination-container')
    };
    
    // --- CÁC HÀM TIỆN ÍCH DỮ LIỆU JSON ---
    const findBrandByName = (name) => globalJsonData.product.brand.find(b => b.name === name); 
    const findBrandIndexByName = (name) => globalJsonData.product.brand.findIndex(b => b.name === name);
    const productTypes = ['laptop', 'balo', 'phukienkhac'];

    // Tính tổng số lượng sản phẩm
    const calculateProductCount = (brand) => {
        return productTypes.reduce((count, type) => {
            return count + (Array.isArray(brand[type]) ? brand[type].length : 0);
        }, 0);
    };

    // --- CÁC HÀM LOCAL STORAGE---
    const LOCAL_STORAGE_KEY = 'adminProductData';

    function saveDataToLocalStorage() {
        try {
            localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(globalJsonData));
            console.log("✅ Dữ liệu đã được lưu vào Local Storage.");
        } catch (error) {
            console.error("❌ Lỗi khi lưu vào Local Storage:", error);
        }
    }

    function loadDataFromLocalStorage() {
        try {
            const savedData = localStorage.getItem(LOCAL_STORAGE_KEY);
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                if (parsedData?.product?.brand) {
                    globalJsonData = parsedData;
                    console.log("✅ Tải dữ liệu từ Local Storage thành công.");
                    return true;
                }
            }
        } catch (error) {
            console.error("❌ Lỗi khi tải dữ liệu từ Local Storage:", error);
        }
        return false;
    }

    // --- HÀM TẢI DỮ LIỆU TĨNH ---
    function loadStaticData() {
        try {
            if (loadDataFromLocalStorage()) {
            } else {
                console.log("Sử dụng dữ liệu tĩnh (static).");
                // Lưu dữ liệu tĩnh vào Local Storage lần đầu
                saveDataToLocalStorage(); 
            }
            
            if (globalJsonData?.product?.brand) {
                renderBrands();
            } else {
                DOM.tableBody.innerHTML = `<tr><td colspan="5" style="text-align: center; color: red;">Lỗi tải dữ liệu. Cấu trúc dữ liệu không hợp lệ.</td></tr>`;
            }
        } catch (err) {
            console.error("❌ Lỗi khi tải dữ liệu:", err);
            DOM.tableBody.innerHTML = `<tr><td colspan="5" style="text-align: center; color: red;">Lỗi khi render dữ liệu.</td></tr>`;
        }
    }
    
    // HÀM TẠO PHÂN TRANG
    function createPagination(totalItems, itemsPerPage, currentPage, pageContainer, onPageChangeCallback) {
        const totalPages = Math.max(1, Math.ceil(totalItems / itemsPerPage));
        pageContainer.innerHTML = '';
        if (currentPage > totalPages && totalItems > 0) currentPage = totalPages;
        
        const startPage = Math.max(1, currentPage - 1);
        const endPage = Math.min(totalPages, currentPage + 1);

        if (startPage > 1) pageContainer.appendChild(createButton(1, currentPage, onPageChangeCallback, totalPages));
        if (startPage > 2) pageContainer.innerHTML += `<span>...</span>`;

        for (let i = startPage; i <= endPage; i++) {
            pageContainer.appendChild(createButton(i, currentPage, onPageChangeCallback, totalPages));
        }

        if (endPage < totalPages - 1) pageContainer.innerHTML += `<span>...</span>`;
        if (endPage < totalPages) pageContainer.appendChild(createButton(totalPages, currentPage, onPageChangeCallback, totalPages));
    }
    
    const createButton = (page, currentPage, onPageChangeCallback, totalPages) => {
        const button = document.createElement('button');
        button.classList.add('page-btn');
        button.textContent = page.toString();
        if (page === currentPage) button.classList.add('active');
        button.onclick = () => onPageChangeCallback(page);
        return button;
    };

    // RENDER BRAND VÀ PHÂN TRANG
    function renderBrands(filteredBrands = null) {
        DOM.tableBody.innerHTML = '';
        
        const brandsToPaginate = filteredBrands || globalJsonData.product.brand;
        const totalBrands = brandsToPaginate.length;

        const startIndex = (currentBrandPage - 1) * brandsPerPage;
        const brandsToRender = brandsToPaginate.slice(startIndex, startIndex + brandsPerPage);

        brandsToRender.forEach((brand) => { 
            const soLuong = calculateProductCount(brand); 
            const brandName = brand.name;
            const originalIndex = globalJsonData.product.brand.findIndex(b => b.name === brandName);

            const newRow = DOM.tableBody.insertRow();
            newRow.dataset.brandName = brandName;
            newRow.dataset.viewMode = 'false';
            newRow.dataset.id = originalIndex + 1; 

            newRow.innerHTML = `
                <td>${originalIndex + 1}</td> <td class="brand-name-cell">${brandName}</td>
                <td>${soLuong}</td>
                <td>
                    <label class="switch">
                        <input type="checkbox" ${brand.status === 'active' ? 'checked' : ''} onchange="toggleBrandStatus('${brandName}', this.checked)">
                        <span class="slider round"></span>
                    </label>
                </td>
                <td>
                    <div class="action-buttons-container">
                        <button class="action-btn delete-btn-v2" onclick="deleteBrand('${brandName}', this)">
                            <i class="fas fa-times"></i>
                        </button>
                        <div class="dropdown">
                            <i class="fas fa-chevron-down dropdown-toggle"></i>
                            <div class="dropdown-content">
                                <a href="#" onclick="viewProduct(this); return false;"><i class="fas fa-eye"></i> Chỉ xem</a>
                                <a href="#" onclick="editBrand('${brandName}', this); return false;"><i class="fas fa-edit"></i> Chỉnh sửa</a>
                            </div>
                        </div>
                    </div>
                </td>
            `;
        });
        
        createPagination(totalBrands, brandsPerPage, currentBrandPage, DOM.brandPaginationContainer, (newPage) => {
            currentBrandPage = newPage;
            renderBrands(filteredBrands); 
        });
    }
    // HIỂN THỊ SẢN PHẨM CỦA TRANG HIỆN TẠI
    window.showProductsForCurrentPage = (brandName) => {
        const productsToPaginate = filteredProductsList.length > 0 ? filteredProductsList : currentProductsList; 
        const totalProducts = productsToPaginate.length;
        const totalPages = Math.max(1, Math.ceil(totalProducts / productsPerPage));
        
        if (currentProductPage > totalPages && totalProducts > 0) currentProductPage = totalPages;
        else if (totalProducts === 0) currentProductPage = 1; 
        
        const startIndex = (currentProductPage - 1) * productsPerPage;
        const productsToRender = productsToPaginate.slice(startIndex, startIndex + productsPerPage);

        DOM.productListTbody.innerHTML = '';

        if (productsToRender.length > 0) {
            productsToRender.forEach((product, localIndex) => {
                const isVisible = (product.status || 'an').toLowerCase().trim() === 'hien';
                const statusText = isVisible ? "Hiển thị" : "Đã ẩn";
                const eyeIcon = isVisible ? "fas fa-eye" : "fas fa-eye-slash";
                const productTypeDisplay = product.type === 'laptop' ? '' : ` (${product.type})`;
                const newRow = DOM.productListTbody.insertRow();
                
                newRow.dataset.brandName = brandName;
                newRow.dataset.productType = product.type; 
                newRow.dataset.originalIndex = product.originalIndex; 
                newRow.dataset.model = product.model || 'N/A';
                newRow.dataset.price = product.price || 'N/A';
                newRow.dataset.statusText = statusText;
                newRow.dataset.id = product.id || `SP-${startIndex + localIndex + 1}`; 
                newRow.dataset.image = product.image || `https://placehold.co/40x40`; 
                newRow.dataset.description = product.description || "Đang cập nhật..."; 

                newRow.insertCell().textContent = newRow.dataset.id; 
                newRow.insertCell().innerHTML = `
                    <div class="sp-product-info">
                        <img src="${newRow.dataset.image}" alt="${newRow.dataset.model}" class="sp-product-image"> <div>
                            <div class="sp-product-name">${newRow.dataset.model}</div>
                            <div class="sp-product-brand">${brandName}${productTypeDisplay}</div>
                        </div>
                    </div>
                `;
                newRow.insertCell().textContent = newRow.dataset.price ? `${newRow.dataset.price} VNĐ` : 'N/A';
                newRow.insertCell().innerHTML = `<span class="sp-status ${isVisible ? "sp-in-stock" : "sp-out-of-stock"}">${statusText}</span>`;
                
                newRow.insertCell().innerHTML = `
                    <div class="sp-actions">
                        <span class="sp-detail-link" onclick="showDetailsPopup(this)">Chi tiết</span>
                        <button class="sp-action-btn sp-toggle-visibility-btn" title="Ẩn/Hiện" onclick="toggleProductStatus('${brandName}', '${product.type}', ${product.originalIndex}, this)"><i class="${eyeIcon}"></i></button>
                        <button class="sp-action-btn sp-remove-btn" title="Xóa" onclick="deleteProduct('${brandName}', '${product.type}', ${product.originalIndex}, this)"><i class="fas fa-times"></i></button>
                        <button class="sp-action-btn sp-edit-btn" title="Chỉnh sửa" onclick="editProduct('${brandName}', '${product.type}', ${product.originalIndex})"><i class="fas fa-pencil-alt"></i></button>
                    </div>
                `;
            });
        } else {
            const searchTerm = DOM.brandSearchInput.value.trim();
            const message = searchTerm ? 
                `Không tìm thấy sản phẩm nào khớp với từ khóa "${searchTerm}" cho thương hiệu ${brandName}.` : 
                `Không tìm thấy sản phẩm nào cho thương hiệu ${brandName}.`;
            DOM.productListTbody.innerHTML = `<tr><td colspan="5" style="text-align: center;">${message}</td></tr>`;
        }
        
        createPagination(totalProducts, productsPerPage, currentProductPage, DOM.productPaginationContainer, (newPage) => {
            currentProductPage = newPage;
            showProductsForCurrentPage(brandName);
        });
    }
    
    // GỘP TẤT CẢ SẢN PHẨM VÀ HIỂN THỊ
    window.showProductDetails = (brandName) => {
        currentViewingBrandName = brandName; 
        currentProductPage = 1;
        filteredProductsList = []; // Reset danh sách lọc khi chuyển thương hiệu

        DOM.productDetailsArea.style.display = 'block'; 
        DOM.productPaginationContainer.style.display = 'flex';
        DOM.brandManagementArea.style.display = 'none'; 
        
        const targetBrand = findBrandByName(brandName);
        
        if (targetBrand) {
            currentProductsList = productTypes.flatMap(type => {
                return (Array.isArray(targetBrand[type]) ? targetBrand[type] : []).map((p, index) => ({...p, type: type, originalIndex: index}));
            });
            showProductsForCurrentPage(brandName);
        } else {
             DOM.productListTbody.innerHTML = `<tr><td colspan="5" style="text-align: center;">Không tìm thấy thương hiệu ${brandName}.</td></tr>`;
        }
    }


    // --- CÁC HÀM THAO TÁC DỮ LIỆU ---
    
    window.deleteBrand = (brandName, btn) => {
        const row = btn.closest('tr');
        if (row.dataset.viewMode === 'true') return;

        const index = findBrandIndexByName(brandName);
        if (index !== -1 && confirm(`Bạn có chắc muốn xóa Brand: ${brandName} không?`)) {
            globalJsonData.product.brand.splice(index, 1);
            const totalBrands = globalJsonData.product.brand.length;
            const totalPages = Math.ceil(totalBrands / brandsPerPage);
            if (currentBrandPage > totalPages && totalBrands > 0) currentBrandPage = totalPages;
            else if (totalBrands === 0) currentBrandPage = 1;
            renderBrands(); 
            saveDataToLocalStorage(); 
        }
    };

    window.toggleBrandStatus = (brandName, isChecked) => {
        const brand = findBrandByName(brandName);
        if (brand) {
            brand.status = isChecked ? 'active' : 'inactive';
            saveDataToLocalStorage(); 
        }
    };

    window.editBrand = (brandName, link) => {
        const row = link.closest('tr');
        if (row.dataset.viewMode === 'true') return false; 

        const brand = findBrandByName(brandName);
        
        if (brand) {
            DOM.tenInput.value = brand.name;
            DOM.soLuongInput.value = calculateProductCount(brand); 

            DOM.submitBtn.textContent = 'Cập nhật';
            DOM.formHeader.textContent = `CHỈNH SỬA LOẠI SẢN PHẨM`; 
            editingRow = row; 
        }
        
        link.closest('.dropdown-content').style.display = 'none'; 
        return false; 
    };

    DOM.submitBtn.addEventListener('click', () => {
        const ten = DOM.tenInput.value.trim();
        if (!ten) return alert('Vui lòng nhập Tên/Thương hiệu hợp lệ!');

        if (editingRow) {
            const brand = findBrandByName(editingRow.dataset.brandName);
            if (brand) {
                brand.name = ten;
                editingRow.querySelector('.brand-name-cell').textContent = ten;
                editingRow.dataset.brandName = ten; 
            }
        } else {
            const newBrand = { "name": ten, "status": "active", "laptop": [], "balo": [], "phukienkhac": [] };
            globalJsonData.product.brand.push(newBrand);
            currentBrandPage = Math.ceil(globalJsonData.product.brand.length / brandsPerPage);
            renderBrands();
        }
        resetForm();
        saveDataToLocalStorage(); 
    });

    // --- CÁC HÀM KHÁC ---

    window.hideProductDetails = () => {
        DOM.productDetailsArea.style.display = 'none';
        DOM.productPaginationContainer.style.display = 'none';
        DOM.brandManagementArea.style.display = 'block';
        DOM.brandSearchInput.value = '';
        filterBrands('');
        currentViewingBrandName = null;
        currentProductPage = 1;
        currentProductsList = []; 
        filteredProductsList = []; 
    };
    
    const recompileProductList = (brand) => {
        currentProductsList = productTypes.flatMap(type => {
            return (Array.isArray(brand[type]) ? brand[type] : []).map((p, index) => ({...p, type: type, originalIndex: index}));
        });
        filteredProductsList = [];
        showProductsForCurrentPage(currentViewingBrandName);
        renderBrands(); // Cập nhật số lượng Brand
    };

    window.deleteProduct = (brandName, type, index, btn) => {
        const brand = findBrandByName(brandName);
        const product = brand?.[type]?.[index];

        if (product && confirm(`Bạn có chắc muốn xóa Sản phẩm "${product.model}" không?`)) {
            brand[type].splice(index, 1);
            recompileProductList(brand);
            saveDataToLocalStorage(); 
        }
    };
    
    window.editProduct = (brandName, type, index) => {
        const brand = findBrandByName(brandName);
        const product = brand?.[type]?.[index];
        if (!product) return alert("Lỗi: Không tìm thấy sản phẩm để chỉnh sửa.");

        const newModel = prompt("Chỉnh sửa Model sản phẩm:", product.model);
        if (newModel === null) return;

        const newImage = prompt("Chỉnh sửa URL Hình ảnh:", product.image);
        if (newImage === null) return;

        const newDescription = prompt("Chỉnh sửa Thông số chi tiết (tách bằng |):", (product.description || '').replace(/\n/g, ' | '));
        if (newDescription === null) return;

        product.model = newModel.trim();
        product.image = newImage.trim();
        product.description = newDescription.trim();

        recompileProductList(brand);
        saveDataToLocalStorage(); 
    };

    window.toggleProductStatus = (brandName, type, index, btn) => {
        const brand = findBrandByName(brandName);
        const product = brand?.[type]?.[index];

        if (product) {
            product.status = (product.status === 'hien') ? 'an' : 'hien';
            
            const row = btn.closest('tr');
            const statusText = (product.status === 'hien') ? 'Hiển thị' : 'Đã ẩn';
            
            row.dataset.statusText = statusText;
            row.querySelector('.sp-status').textContent = statusText;
            row.querySelector('.sp-status').className = `sp-status ${product.status === 'hien' ? 'sp-in-stock' : 'sp-out-of-stock'}`;
            btn.querySelector('i').className = product.status === 'hien' ? 'fas fa-eye' : 'fas fa-eye-slash';
            saveDataToLocalStorage(); 
        }
    };

    window.addNewProduct = () => {
        if (!currentViewingBrandName) return alert("Lỗi: Không xác định được thương hiệu hiện tại.");

        const brand = findBrandByName(currentViewingBrandName);
        if (!brand) return;

        const productTypeInput = prompt(`Nhập Loại SP (${productTypes.join(', ')}):`);
        if (!productTypeInput) return;
        const type = productTypeInput.trim().toLowerCase();
        if (!productTypes.includes(type)) return alert(`Loại SP không hợp lệ. Vui lòng chọn: ${productTypes.join(', ')}.`);
            
        const id = prompt(`Nhập Mã SP (ID) cho loại ${type}:`);
        if (!id) return;
        if (brand[type] && brand[type].some(p => p.id === id)) return alert("Lỗi: Mã SP này đã tồn tại!");

        const model = prompt("Nhập Model SP:");
        if (!model) return;

        const price = prompt("Nhập Giá tiền (ví dụ: 15.000.000):");
        if (!price) return;
            
        const image = prompt("Nhập URL Hình ảnh:", "https://placehold.co/150x150?text=IMG");
        if (!image) return;

        const description = prompt("Nhập Thông số chi tiết (ngăn cách bằng dấu |):", "Thông tin mô tả...");
        if (!description) return;

        const newProduct = { "id": id, "model": model, "price": price, "image": image, "description": description, "status": "hien" };

        if (!brand[type]) brand[type] = [];
        brand[type].push(newProduct);
        
        currentProductPage = Math.ceil((currentProductsList.length + 1) / productsPerPage);
        recompileProductList(brand); 
        saveDataToLocalStorage(); 
    };
    
    // HÀM LỌC BRAND
    function filterBrands(searchTerm) {
        const term = searchTerm.toLowerCase().trim();
        const filtered = globalJsonData.product.brand.filter(brand => 
            (brand.name || '').toLowerCase().includes(term)
        );
        currentBrandPage = 1;
        renderBrands(filtered); 
    }
    // HÀM LỌC PRODUCT
    function filterProducts(searchTerm) {
        const term = searchTerm.toLowerCase().trim();
        
        if (!term) {
            filteredProductsList = [];
        } else {
            // Lọc theo model, id, hoặc price
            filteredProductsList = currentProductsList.filter(product => {
                const model = (product.model || '').toLowerCase();
                const id = (product.id || '').toLowerCase();
                const price = (product.price || '').toLowerCase();
                return model.includes(term) || id.includes(term) || price.includes(term);
            });
        }
        
        currentProductPage = 1;
        showProductsForCurrentPage(currentViewingBrandName); 
    }

    function resetForm() {
        DOM.tenInput.value = '';
        DOM.soLuongInput.value = 0; 
        DOM.submitBtn.textContent = 'Hoàn tất';
        DOM.formHeader.textContent = 'THÊM LOẠI SẢN PHẨM';
        editingRow = null;
    }
    
    DOM.resetBtn.addEventListener('click', resetForm);
    

    window.closeModal = (event) => {
        if (event.target.id === 'detailsModal') event.target.style.display = "none";
    };
    
    window.editOffer = () => {
        const newContent = prompt("Nhập nội dung ưu đãi mới:", currentOfferContent.trim());
        
        if (newContent !== null) {
            currentOfferContent = newContent;
            document.getElementById('detail-offer-content').textContent = currentOfferContent;
            alert("Đã cập nhật ưu đãi thành công!");
            
        }
    };
    
    window.showDetailsPopup = (btn) => {
        const row = btn.closest('tr');
        
        const modal = document.getElementById('detailsModal');
        document.getElementById('modal-title').textContent = `Chi tiết ${row.dataset.model}`;
        document.getElementById('detail-product-name').textContent = `${row.dataset.brandName} ${row.dataset.model}`;
        document.getElementById('detail-price').innerHTML = `Giá: <strong>${row.dataset.price}</strong> VNĐ`;
        document.getElementById('detail-status').textContent = `Tình trạng: ${row.dataset.statusText === 'Hiển thị' ? 'Còn hàng' : 'Hết hàng'}`;
        document.getElementById('detail-offer-content').textContent = currentOfferContent; 
        document.getElementById('detail-product-image').src = row.dataset.image;
        document.getElementById('detail-description-content').textContent = row.dataset.description.replace(/ \| /g, '\n'); 
        
        modal.style.display = 'block';
    };

    window.viewProduct = (link) => {
        const row = link.closest('tr');
        const isViewOnly = !(row.dataset.viewMode === 'true');
        row.dataset.viewMode = isViewOnly;
        row.classList.toggle("view-mode", isViewOnly);
        
        const deleteBtn = row.querySelector('.delete-btn-v2');
        const editLink = row.querySelector('.dropdown-content a:nth-child(2)');

        deleteBtn.disabled = isViewOnly;
        deleteBtn.style.opacity = isViewOnly ? "0.5" : "1";
        deleteBtn.style.pointerEvents = isViewOnly ? "none" : "auto";

        editLink.style.pointerEvents = isViewOnly ? "none" : "auto";
        editLink.style.opacity = isViewOnly ? "0.5" : "1";
        
        link.innerHTML = isViewOnly ? '<i class="fas fa-eye-slash"></i> Thoát xem' : '<i class="fas fa-eye"></i> Chỉ xem';
        link.closest('.dropdown-content').style.display = 'none';

        return false; 
    };
    // Xử lý sự kiện tìm kiếm (Phân biệt Brand và Product)
    DOM.brandSearchInput.addEventListener('input', (e) => {
        const searchTerm = e.target.value;
        const isBrandPageVisible = DOM.brandManagementArea.style.display !== 'none';
        
        if (isBrandPageVisible) {
            filterBrands(searchTerm); 
        } else if (currentViewingBrandName) {
            filterProducts(searchTerm); 
        }
    });
    
    DOM.tableBody.addEventListener('click', (e) => {
        const brandNameCell = e.target.closest('.brand-name-cell');
        if (brandNameCell) showProductDetails(brandNameCell.textContent);
    });

    document.addEventListener('click', (e) => {
        const target = e.target;
        
        const isDropdownClick = target.closest('.dropdown');
        if (!isDropdownClick) document.querySelectorAll('.dropdown-content').forEach(dc => dc.style.display = 'none');

        if (target.classList.contains('dropdown-toggle')) {
            const dropdownContent = target.nextElementSibling;
            document.querySelectorAll('.dropdown-content').forEach(dc => {
                if (dc !== dropdownContent) dc.style.display = 'none';
            });
            
            if (dropdownContent) {
                dropdownContent.style.display = (dropdownContent.style.display === 'block') ? 'none' : 'block';
            }
        }
    });
    loadStaticData();
};
